!function(n){"function"==typeof require&&"object"==typeof exports&&"object"==typeof module?n(require("knockout"),exports):"function"==typeof define&&define.amd?define(["knockout","exports"],n):n(ko,ko.mapping={})}(function(n,t){var e={},r=Array.prototype.forEach,o=Object.prototype.toString,u=Array.isArray||function(n){return"[object Array]"===o.call(n)},i=function(n){return"[object String]"===o.call(n)},c=function(n){return n===Object(n)},f=function(n){return n===!0||n===!1||"[object Boolean]"===o.call(n)},a=function(n){return o.call(n)==="[object "+Number+"]"||!isNaN(n)},l=function(n){return o.call(n)==="[object "+Function+"]"},p=function(n){return o.call(n)==="[object "+Date+"]"};"function"!=typeof/./&&(l=function(n){return"function"==typeof n});var b=function(n,t,o){if(null!==n)if(r&&n.forEach===r)n.forEach(t,o);else if(u(n)){for(var i=0,c=n.length;c>i;i+=1)if(t.call(o,n[i],i,n)===e)return}else for(var f in n)if(t.call(o,n[f],f,n)===e)return};t.toJSONByPrototype=n.toJSONByPrototype=function(n,t){var e=n;return function(n){var t=function(n,e,r){return Object.keys(e).forEach(function(o){if(r[o]){var p=e[o];if(u(p))if(n[o]=[],u(r[o]))n[o]=r[o];else{var s=r[o](),v=p.length>0&&p[0]&&c(p[0]);v?b(s,function(e){n[o].push(t({},p[0],e))}):b(s,function(t){n[o].push(l(t)?t():t)})}else i(p)||a(p)||f(p)?n[o]=l(r[o])?r[o]():r[o]:l(p)||c(p)&&l(p.read)&&l(p.write)||c(p)&&(n[o]={},t(n[o],p,p._observable?r[o]():r[o]))}}),n};return t({},n,e)}(t)},t.updateViewModel=n.updateViewModel=function(n,e){var r=n;return function(n){var e=function(n,r,o){return n&&r&&b(n,function(n,p){if(r[p]){var s=o+"."+p;if(u(n)&&r[p]){r[p]([]);var v=n.length>0&&n[0]&&c(n[0]);v?b(n,function(n){r[p].push(t.mapObject({},n))}):r[p](n)}else i(n)||a(n)||f(n)?r[p]&&l(r[p])&&r[p](n):l(n)||c(n)&&l(n.read)&&l(n.write)||c(n)&&e(n,r[p],s)}}),r};e(n,r,"")}(e)},t.mapObject=n.mapObject=function(t,e,r,o,s){var v=t;return function(t,e,r,o){var s=function(t,e,r,o){var v=r||{};return b(t,function(t,r){if("_observable"!==r)if(u(t)){e[r]=n.observableArray(),v[r]&&e[r].extend(u(v[r])&&v[r].length>0?v[r][0]:v[r]);var d=t.length>0&&t[0]&&c(t[0]);d?b(t,function(n){e[r].push(s(n,{},{},o))}):b(t,function(n){e[r].push(n)})}else i(t)||a(t)||f(t)||p(t)?(e[r]=n.observable(t),v[r]&&e[r].extend(v[r])):l(t)||c(t)&&l(t.read)&&l(t.write)||c(t)&&(e[r]=t._observable?n.observable():{},s(t,e[r],v[r],o))}),e},d=function(t,e,r){return b(t,function(t,o){if(u(t)){var v=t.length>0&&t[0]&&c(t[0]);v&&b(t,function(n){s(n,{},r)})}else i(t)||a(t)||f(t)||p(t)||(l(t)?e[o]=n.pureComputed(t,r):c(t)&&l(t.read)&&l(t.write)?e[o]=n.pureComputed(t,r):c(t)&&d(t,e[o],r))}),e},y=function(n,t,e){b(n,function(n,r){u(n)?(t[r]=[],b(n,function(n){t[r].push(l(n)?n.bind(e):n)})):l(n)?t[r]=n.bind(e):c(n)&&(t[r]||(t[r]={}),y(n,t[r],e))})};return b(o,function(n,t){v[t]=n}),s(t,v,e,v),d(t,v,v),y(r,v,v),v.init&&v.init(),v}(e,r||{},o||{},s||{})}});