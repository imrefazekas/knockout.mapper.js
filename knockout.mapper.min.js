!function(e){"function"==typeof require&&"object"==typeof exports&&"object"==typeof module?e(require("knockout"),exports):"function"==typeof define&&define.amd?define(["knockout","exports"],e):e(ko,ko.mapping={})}(function(e,n){var t={},r=Array.prototype.forEach,o=Object.prototype.toString,i=Array.isArray||function(e){return"[object Array]"===o.call(e)},u=function(e){return"[object String]"===o.call(e)},f=function(e){return e===Object(e)},c=function(e){return e===!0||e===!1||"[object Boolean]"===o.call(e)},a=function(e){return o.call(e)==="[object "+Number+"]"||!isNaN(e)},l=function(e){return o.call(e)==="[object "+Function+"]"},s=function(e){return o.call(e)==="[object "+Date+"]"};"function"!=typeof/./&&(l=function(e){return"function"==typeof e});var p=function(e,n,o){if(null!==e)if(r&&e.forEach===r)e.forEach(n,o);else if(i(e)){for(var u=0,f=e.length;f>u;u+=1)if(n.call(o,e[u],u,e)===t)return}else for(var c in e)if(n.call(o,e[c],c,e)===t)return};n.toJSONByPrototype=e.toJSONByPrototype=function(e,n){var t=e,r=function(e,n,t){return Object.keys(n).forEach(function(o){if(t[o]){var s=n[o];if(i(s))if(e[o]=[],i(t[o]))e[o]=t[o];else{var b=t[o](),d=s.length>0&&s[0]&&f(s[0]);d?p(b,function(n){e[o].push(r({},s[0],n))}):p(b,function(n){e[o].push(l(n)?n():n)})}else if(u(s)||a(s)||c(s))e[o]=l(t[o])?t[o]():t[o];else{if(l(s))return;if(f(s)&&l(s.read)&&l(s.write))return;f(s)&&(e[o]={},r(e[o],s,s._observable?t[o]():t[o]))}}}),e};return r({},n,t)},n.resetViewModel=e.resetViewModel=function(e){var n=e,t=function(e){return e?(l(e)?e.originalValue&&e(e.originalValue()):f(e)&&p(e,function(n,r){t(e[r])}),e):void 0};t(n)},n.updateViewModel=e.updateViewModel=function(e,t){var r=e,o=function(e,t,r){return e&&t&&p(e,function(e,s){if(t[s]){var b=r+"."+s;if(i(e)&&t[s]){t[s]([]);var d=e.length>0&&e[0]&&f(e[0]);d?p(e,function(e){t[s].push(n.mapObject({},e))}):t[s](e)}else if(u(e)||a(e)||c(e))t[s]&&l(t[s])&&t[s](e);else{if(l(e))return;if(f(e)&&l(e.read)&&l(e.write))return;f(e)&&o(e,t[s],b)}}}),t};o(t,r,"")},e.extenders.originalValue=function(n,t){n.originalValue||(n.originalValue=e.observable(t))},n.mapObject=e.mapObject=function(n,t,r,o,b){var d=n,v=t,y=r||{},g=o||{},h=b||{},j=function(n,t,r,o){var b=r||{};return p(n,function(n,r){if("_observable"!==r)if(i(n)){t[r]=e.observableArray(),b[r]&&t[r].extend(i(b[r])&&b[r].length>0?b[r][0]:b[r]);var d=n.length>0&&n[0]&&f(n[0]);d?p(n,function(e){t[r].push(j(e,{},{},o))}):p(n,function(e){t[r].push(e)})}else if(u(n)||a(n)||c(n)||s(n))console.log(r),t[r]=e.observable(n).extend({originalValue:n}),b[r]&&t[r].extend(b[r]);else{if(l(n))return;if(f(n)&&l(n.read)&&l(n.write))return;f(n)&&(t[r]=n._observable?e.observable():{},j(n,t[r],b[r],o))}}),t},V=function(n,t,r){return p(n,function(n,o){if(i(n)){var b=n.length>0&&n[0]&&f(n[0]);b&&p(n,function(e){j(e,{},r)})}else{if(u(n)||a(n)||c(n)||s(n))return;l(n)?t[o]=e.pureComputed(n,r):f(n)&&l(n.read)&&l(n.write)?t[o]=e.pureComputed(n,r):f(n)&&V(n,t[o],r)}}),t},m=function(e,n,t){p(e,function(e,r){i(e)?(n[r]=[],p(e,function(e){n[r].push(l(e)?e.bind(t):e)})):l(e)?n[r]=e.bind(t):f(e)&&(n[r]||(n[r]={}),m(e,n[r],t))})};return p(h,function(e,n){d[n]=e}),j(v,d,y,d),V(v,d,d),m(g,d,d),d.init&&d.init(),d}});